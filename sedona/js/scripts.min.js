!function(){var a=document.querySelector(".main-menu__icon"),b=document.querySelector(".main-menu__close"),c=document.querySelector(".main-menu__items");a.addEventListener("click",function(a){c.classList.add("main-menu__items--open")}),b.addEventListener("click",function(a){c.classList.remove("main-menu__items--open")})}(),function(){var a=document.querySelectorAll(".form-item__number"),b=document.querySelectorAll(".form-item__btn--plus"),c=document.querySelectorAll(".form-item__btn--minus");for(i=0;i<b.length;i++)b[i].addEventListener("click",function(b){b.preventDefault();var c=b.target,d=c.parentNode;a=d.querySelector(".form-item__number"),parseInt(a.value)<999&&(a.value=parseInt(a.value)+1)});for(i=0;i<c.length;i++)c[i].addEventListener("click",function(b){b.preventDefault();var c=b.target,d=c.parentNode;a=d.querySelector(".form-item__number"),parseInt(a.value)-1>=0&&(a.value=parseInt(a.value)-1)})}(),function(){function a(){var a=document.createElement("div"),c=Mustache.render(f,{value:parseInt(b.value)});a.classList.add("persons-item"),a.innerHTML=c,e.appendChild(a)}var b=document.querySelector("#count"),c=(parseInt(b.value),document.querySelector(".form-item--count .form-item__btn--plus")),d=document.querySelector(".form-item--count .form-item__btn--minus"),e=document.querySelector(".area"),f=document.querySelector("#travel-template").innerHTML;c.addEventListener("click",function(c){c.preventDefault(),console.info("добавляем пользователя"),b.value=parseInt(b.value),a()}),d.addEventListener("click",function(a){a.preventDefault(),console.info("удаляем пользователя"),e.removeChild(e.lastChild)})}(),function(){function a(a){c=c.filter(function(b){return b.figure!=a}),a.parentNode.removeChild(a)}function b(b){var d=document.querySelector(".photo-items"),e=document.querySelector("#image-template").innerHTML;if(b.type.match(/image.*/)){var f=new FileReader;f.addEventListener("load",function(f){var g=e.replace("{{image}}",f.target.result);g=g.replace("{{name}}",b.name);document.createElement("figure");figure.classList.add("photo-item"),figure.innerHTML=g,d.appendChild(figure),c.push({file:b,figure:figure}),figure.querySelector(".photo-item__close").addEventListener("click",function(b){b.preventDefault(),a(figure)})}),f.readAsDataURL(b)}}if("FormData"in window){var c=[],d=document.querySelector(".main-form");d.addEventListener("submit",function(a){a.preventDefault();var b=new FormData(d),e=new XMLHttpRequest,f=(new Date).getTime();c.forEach(function(a){b.append("images",a.file)}),e.open("post","https://echo.htmlacademy.ru/adaptive?"+f),e.addEventListener("readystatechange",function(){4==e.readyState&&console.log(e.responseText)}),e.send(b),d.reset()}),document.querySelector(".form-items__file").addEventListener("change",function(){for(var a=this.files,c=0;c<a.length;c++)b(a[c]);this.value=""})}}();